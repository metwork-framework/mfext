# release_1.0 CHANGELOG

## v1.0.8 (2021-01-21)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)

## v1.0.9 (2021-01-21)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)

## v1.0.7 (2021-01-06)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)

## v1.0.6 (2020-12-03)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)

## v1.0.5 (2020-11-24)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)

## v1.0.4 (2020-11-19)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)

## v1.0.3 (2020-11-03)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)

## v1.0.2 (2020-10-27)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)

## v1.0.1 (2020-09-25)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)

## v1.0.0 (2020-09-24)

### New Features

- first import
- add websocket support for openresty
- add websocket support for openresty
- add integration_tests layer and rpm mfext-integration-tests
- mapserver introduction
- we increase some system limits (nofile and nproc)
- upgrade python requests because of security alert
- load mapserver layer by default (if available)
- we can now use plugin_env function in a plugin directory
- add pytest package and update some other ones
- upgrade eccodes to 2.9.0
- add mapserverapi library
- add mapserverapi_python
- Add postgresql support in gdal
- now we can use pip inside a "plugin env"
- add mapserverapi_python
- patch certifi for using system certificates on centos
- use normal "npm" workflow inside a "plugin_env"
- add geos, lxml, pycurl, pyproj and sqlalchemy
- check that module crontab is not empy in mfxxx.status
- better default MODULE_RUNTIME_SUFFIX
- Add possibility to pip install package from https url.
- guess released versions with tags
- add lxml, pycurl, pyproj and sqlalchemy as in python3
- add basemap, cdsapi, graphviz, pandas and scikit-learn
- telegraf is now monitoring itself
- add graphviz in scientific layer
- add pygraphviz in python[23]_scientific layers
- add diskcache in python2 and python3 layers
- telegraf update (1.7.1 => 1.7.4)
- upgrade eccodes from 2.9.0 to 2.10.0 and
- Add Fiona in python2 and python3 scientific layers
- expose new function in layerapi2
- update urllib3 (1.22 => 1.23) 
- add openjdk as a non default layer
- introduce monitoring layer (loaded by default) and move telegraf
- add filebeat component
- telegraf update (1.7.4 => 1.9.1)
- upgrade netCDF4 python from 1.4.0 to 1.4.2
- clean some useless files in .plugin files
- upgrade python3 from 3.5.3 to 3.5.6 and python2 from 2.7.9 to
- lua-resty-stats upgrade (0.0.2 => 0.0.3)
- ignore lines starting with # in .layerapi2_dependencies/conflicts
- Simplify _metwork.spec with self discovery of layer dependencies
- add some metapackages aliases to have a cleaner installation doc
- we remove the src directory from .plugin files
- add a way to install binary python wheels
- add a python3_ia layer
- user-defined configuration name
- execute integration tests directly from mfext module
- new utility "outside" to execute commands outside the metwork env
- introduce new mflog library
- Upgrade geos from 3.6.2 to 3.7.1 (with scl for C++11 on centos6)
- Upgrade postgis from 2.4.4 to 2.4.6
- remove "aliases" rpms (replaced by the use of Provides in spec file)
- prevent single rpm installation and make sure the layer root rpm is the last uninstalled rpm when uninstalling the module
- upgrade mflog to latest master
- upgrade mflog to latest master
- introduce mfext addons
- mflog update (again)
- remove python3_ia layer (we are building an dedicated addon for
- delete filebeat component
- add a first version of jsonlog2elasticsearch
- add sphinx-automodapi module
- mfutil_c introduction and some profile changes
- use our cookiecutter fork to add some features
- upgrade glib2 from 2.40.2 to 2.56.4
- mflog update to fix some issues about null files
- use python27 scl (python 2.7.13) if python version < 2.8 (python 2.7.5 in centos7)
- refuse mfxxx.stop/start if the config.ini is newer than the current env
- try to keep a backup of user files during uninstall
- split old scientific layer between scientific_core layer
- introduce mflog2mfadmin feature
- mflog update
- telegraf update
- update mflog and use new automatic context function
- remove prerequirements files
- update mflog
- add graphviz in devtools layer (for documentation)
- allow to build mfext behing a corporate http proxy
- urllib3 update (1.23 => 1.24.2) because of upstream security issue
- add search_paths feature to cookiecutter
- add cookiecutter_hooks project
- update openjdk 11.0.1 => 11.0.2 and add mirror
- openresty update (1.11.2.2 => 1.13.6.2)
- keep request_id field in logs
- add sqlite3 and libspatialite supports to gdal
- add werkzeug component (python wsgi toolbox)
- add some sysctl tunings
- add terminaltables component
- restore env after exiting plugin_env
- add libev component
- preserve some extra env var in mfxxx_wrapper
- upgrade envtpl (both in python requirements and under portable_envtpl devtool)
- use envtpl new option --reduce-multi-blank-lines
- update cookiecutter_hooks (reduce multi blank lines to a single one and conform python code to pep8)
- upgrade python3 from 3.5.6 to 3.7.3, python2 from 2.7.15 to 2.7.16 and all python requirements with use of libressl instead of openssl
- give up modules start if precondition failed
- upgrade redis from 3 to 5
- telegraf update (1.10.2 => 1.11.2)
- nodejs/npm update (nodejs 8.11.2 => 10.16.0, npm/6.1.0 => npm/6.9.0)
- add revert_ldd.sh and external_dependencies.sh utilities
- mflog update to support non standard logging levels
- update mfutil_c and introduce mfutil_lua
- upgrade netcdf and build with gcc/gfortran >= 4.5 for fortran compatibily with esmf on addon scientific
- introduce build extra dependencies
- new packaging + layerapi2 is now hosted in a dedicated repository
- embed libffi and use it instead of system library
- embed readline and use it instead of the system library
- move netcdf fortran from mfext to mfextaddon_scientific (so libgfortran is not needed any more as system dependency in mfext)
- embed libpng
- embed tcl/tk libraries and build python2/3 with them
- refactoring about #437, #432, #420
- add some system dependencies
- no more default passwords, prelimininary systemd support
- replace MODULE* environment variables names by MFMODULE* (MODULE_HOME becomes MFMODULE_HOME and so on)
- introduce components utility
- add black python component
- add hmac openresty component
- update layerapi2
- integrate mfcom in mfext as 3 mfext layers (misc, python2_misc and python3_misc)
- add NODE_PATH in metwork_debug output
- add empty option to plugin_wrapper
- infinite circus max_retry
- add wrk tool to devtools layer
- add wrk tool to devtools layer
- add some layerapi2 functions in mfutil
- systemd service improvments
- add a banner about configured mfadmin module
- better interactive/GUI processes detection
- add a clear warning...
- add wrk2 (variant of wrk)
- remove layer misc@mfext (share files and shells are moved to adm)
- upgrade pcre from 8.36 to 8.43
- upgrade sqlite from 3.8.8.3 to 3.30.1
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- upgrade gdal from 2.2.4 to 2.4.3 (for compatibility after upgrade of sqlite to recent release)
- add makefiles to install python modules with pip when an induced compilation with scls is necessary
- upgrade c-ares from 1.12.0 to 1.15.0
- upgrade libxslt from 1.1.28 to 1.1.34
- upgrade openjpeg from 2.1.2 to 2.3.1
- upgrade postgresql from 10.1 to 10.11
- upgrade hdf5 from 1.10.2 to 1.10.5
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade proj from 5.2.0 to 6.2.1 with patch to accept use of deprecated proj_api.h
- upgrade postgresql from 10.11 to 12.1 and postgis from 2.4.6 to 3.0.0
- upgrade geos from 3.7.1 to 3.8.0
- upgrade gdal from 2.4.3 to 3.0.2
- add pixman 0.38.4 and upgrade cairo from 1.14.12 to 1.17.2
- add json2syslog2elasticsearch
- add log_proxy
- replace ack by ag (the_silver_searcher)
- update nodejs from 10.16.0 to 10.16.3
- update circus_autorestart_plugin
- upgrade libspatialite from 4.3.0a to 5.0.0-beta0
- reintroduce MFCOM_HOME for plugins migration
- add mkdocs components
- update python2_devtools/python3_devtools components
- update cronwrapper
- add pdoc3 python3 component
- update openjdk from 11.0.2 to 11.0.5, with download from AdoptOpenJDK
- new opinionated_configparser and corresponding changes
- set default mfsysmon admin/hostname config to localhost
- end of configparser_extended migration
- set TMPDIR automatically
- plugins checks
- cronwrap load custom profiles like bashrc/profile
- add coredump size limit in config
- if core_size = -1, ulimit -c is not set
- build all mfext with devtoolset-8 (gcc-8)
- remove python2/3_misc layers
- better interactive profile for mfext
- update telegraf component
- use LOGPROXY_LOG_DIRECTORY env variable for log paths
- introduce automatic cleaning of tmp directory
- add distro python3 component
- add metwork module version and os name/version
- remove upload system account by default
- increase sysctl net.ipv4.tcp_max_syn_backlog
- collect and forward metwork plugin versions
- python requests-toolbelt component replaced by requests-unixsocket
- publish metwork module status on mfadmin
- update log_proxy to get dot control files
- add possibility to exclude files when releasing a plugin and update mfutil
- move all python2 stuff out of mfext (moved in a dedicated mfext addon)
- do not build the layer if file .bypass_build_if_missing contains not available layers
- custom prompt for virtualenv
- cronwrapper update
- we can use *_CURRENT_PLUGIN_* variables in plugin crontabs
- mflog update
- upgrade netcdf_c from 4.7.0 to 4.7.3
- add fontconfig and freetype (moved from mfextaddon_scientific)
- update log_proxy to fix problem when a maximum file size if set by ulimit
- update mfutil to get explicit error messages in some cases when building plugin specfile
- add extension plpython3u to postgresql
- add python3 package 'pika'
- add a new feature in circus_hooks with special exit code 200
- remove all references to MFCOM or mfcom, including backward compatibily stuff
- add xattrfile from specific Metwork repo (was before included in mfdata)
- update log_proxy to version 0.1.0 (fix a potential deadlock in some corner cases)
- new plugin system
- add paramiko (python implementation of SSHv2) and dependencies
- add python3 devtools components (pytest-xdist, pytest-mock, freezegun, recommonmark) and update other components
- add module acquisition (previously in mfdata)
- add directory_observer
- add directory_observer
- add aiohttp-metwork-middlewares and dependencies
- update acquisition to last version
- add psycopg2 in new layer python3_scientific_core@mfext (for use by mfbase, mfserv, mfdata)
- add mkdoc exclude plugin
- manage git requirements without "-e"
- update documentation
- better prompt with virtualenv and better pip management
- build nginx with http_auth_request module (#884)
- drop sphinx libraries (replaced by mkdocs) (bp #899) (#911)
- load the python3_scientific_core layer by default (if installed) (bp #912) (#913)
- move jinja2 extensions packages to python3 layer (bp #996) (#997)

### Bug Fixes

- fix branch guessing with drone ci
- fix drone build caching
- sqlite support for python2/python3
- fix error in template spec file for package mfserv and others
- depency issue with new mapserver subpackage
- mfxxx login problems in docker mode
- add mapserverapi_python
- block mfxxx.start/stop/status/init calls from a plugin_env
- fix build error
- mapserverapi upgrade (0.1.0 => 0.1.1)
- fix layer dependencies in new tests
- rpm names were incorrect with release tags
- do not include .git* files in the plugin RPM
- circus update to fix some stop_signal issues (on circus itself)
- no doc(s) directory in a plugin release
- rpm names with release tags
- force epoch=1 in centos7 openssl dependency
- upgrade mapserverapi (0.1.1 => 0.1.2)
- mapserverapi update (0.1.2 => 0.1.3)
- fix mfxxx.start/stop/status when used in some special dirs
- fix some installation issues in some corner cases
- upgrade problems at RPM levels
- fix some rpm upgrades
- fix the making of circus.ini from template on mfadmin (mfadmin.start was not working anymore)
- only the layers corresponding to the current addon should be in the
- upgrade mflog to fix metwork-framework/mflog#8
- more reliable checks about some circus watchers
- don't launch mflog2mfadmin is admin hostname is null
- jinja2 update (security) 2.10 => 2.10.1
- fix building issues with proxy
- update internal circus version to fix a bug with async_kill feature
- use python3 to build glib2 python tools and remove references to python scl in these tools
- add a patch for openresty about nginx upstreams
- fix bug CHANGELOGS not generated when CHANGELOGS.md doesn't exist (for the first time)
- obsoletes removed python layer
- better vim wrappers (specially in plugin_env)
- close mflog issue11
- fix vimdiff wrapper
- fix vim/vimdiff wrappers usage with git
- add pycodestyle (missing dependency for autopep8)
- add pycodestyle (missing dependency for autopep8)
- disable SSE4.2 optimizations to avoid nginx crashing on old servers
- plugin_env issue with python2 plugins
- fix vi usage without devtools
- use vi in python2 mode when we are in python2
- fix issue #35 on addon scientific (build problem with python2 ESMF)
- fix complex issues with some extra layers in plugin_env
- don't write empty requirements{2,3}.txt file in case of errors
- fix dead link to plugins guide
- external_plugins/ directory for mfbase
- fix metwork services start for systems where /sys is readonly
- fix systemd service
- mfserv_wrapper now loads custom metwork profiles
- correct translation error from French (wrong use of false friend "eventually")
- fix plugin_env behaviour in some corner cases
- remove some old aliases for vim in python2_devtools
- fix automatic restart
- fix nasty warning in mfdata plugin_env when admin is set
- fix pip usage inside plugin_env (and change cwd for plugin_home)
- custom sysctl.conf was not applied during startup
- fix issue 745 (problem with blank lines while editing crontab)
- fix compatibility with old systemd versions
- mfxxx.status must return 1 when errors occur
- fix python2 plugins build
- fix PKG_CONFIG_PATH order in some corner cases
- fix mfdata issue 288
- don't prevent mfserv/nginx to bind <1024 ports with setcap (bp #927) (#929)
- give up profile loading when a required layer is missing (with a… (bp #924) (#925)
- fix an issue with inject_file command in mfdata (bp #944) (#945)
- don't block root usage in CI configurations (bp #937) (#942)
- fix an issue in mfdata acquisition about default values in get_config_value() (bp #950) (#951)
- fix a cache issue with python custom functions with same name (bp #966) (#967)
- update opinionated_configparser (bp #975) (#976)
- fix error message in nginx_error with < 1024 port binding (bp #977) (#979)
- fix an interactive question in some cases during profile loading (bp #991) (#992)
- fix an issue with < 1024 port binding (bp #999) (#1002)
- add missing postgresql support in gdal (bp #1010) (#1012)
- fix missing deps in centos8 (bp #1003) (#1004)
- fix template crontab (bp #1015) (#1016)
- update acquisition to fix a mfdata issue (bp #1046) (#1047)
- update aiohttp 3.6.2 => 3.6.3 (fix a bug with url encoding) (bp #1049) (#1050)


